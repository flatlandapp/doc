# 3.2 数学模型：投票机制

TLF 协议的投票机制建立在科学的数学模型基础上，确保了治理过程的公平性、透明性和效率性。

## 3.2.1 投票权分配

玩家的投票权 $V_i$ 与其质押的 ERC20 代币数量 $T_i$ 和质押时长 $D_i$ 相关，计算公式为：

$$V_i = T_i \cdot (1 + \alpha \cdot \log(1 + D_i))$$

其中：
- $V_i$ 是玩家 $i$ 的投票权重
- $T_i$ 是玩家质押的代币数量
- $D_i$ 是质押的持续时间（以天为单位）
- $\alpha$ 是时间权重系数（一般设为0.1~0.3）

这种计算方式不仅考虑了玩家的经济贡献，也鼓励长期持有和参与，有助于形成稳定的社区治理结构。

## 3.2.2 事件权重计算

每个事件 $E_j$ 的权重 $W_j$ 由所有投票者的加权投票值累加得到：

$$W_j = \sum_{i=1}^{n} V_i \cdot w_{ij}$$

其中：
- $W_j$ 是事件 $E_j$ 的总权重
- $V_i$ 是玩家 $i$ 的投票权重
- $w_{ij}$ 是玩家 $i$ 对事件 $E_j$ 的投票值（范围从-1到1）
- $n$ 是参与投票的玩家总数

## 3.2.3 事件选择算法

TLF 协议采用多轮投票的方式，每个投票周期选出权重最高的 $k$ 个事件执行。选择过程可表示为：

$$\text{Selected Events} = \{E_j | \text{Rank}(W_j) \leq k \text{ 且 } W_j > W_{min}\}$$

其中：
- $\text{Rank}(W_j)$ 是事件 $E_j$ 在权重排名中的位置
- $k$ 是每轮可选事件的最大数量
- $W_{min}$ 是事件权重的最低阈值

同时，为了防止少数资本控制的风险，TLF 引入了二次投票机制，使得投票权重与质押代币的平方根成正比：

$$V_i^* = \sqrt{V_i}$$

这种机制显著减轻了大资本操控治理的风险，使得治理更加民主化。

## 3.2.4 投票周期与调整机制

TLF 协议设置了动态投票周期 $P$，其长度根据游戏活跃度和治理需求自动调整：

$$P_{new} = P_{old} \cdot \left(1 + \beta \cdot \left(\frac{N_{actual}}{N_{expected}} - 1\right)\right)$$

其中：
- $P_{new}$ 是新的投票周期长度
- $P_{old}$ 是原有投票周期长度
- $N_{actual}$ 是实际参与投票的玩家数量
- $N_{expected}$ 是预期参与投票的玩家数量
- $\beta$ 是调整系数（一般设为0.2~0.5）

这种动态调整机制确保了投票周期能够适应游戏社区的实际参与度，在保持治理活跃度的同时，避免过于频繁或稀疏的投票造成的负面影响。
